<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²°ì •ì¥ì•  ë‹¤íŠ¸</title>
    
    <!-- Pretendard í°íŠ¸ -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" rel="stylesheet">
    
    <!-- PWA ë©”íƒ€ íƒœê·¸ -->
    <meta name="description" content="ê²°ì •ì¥ì•  ë‹¤íŠ¸ - ë‹¤íŠ¸ë¡œ ê²°ì •ì„ ë‚´ë ¤ë³´ì„¸ìš”!">
    <meta name="theme-color" content="#007BFF">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ë‹¤íŠ¸ê²Œì„">
    
    <!-- Open Graph / ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ìµœì í™” -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="ê²°ì •ì¥ì•  ë‹¤íŠ¸ ğŸ¯">
    <meta property="og:description" content="ë‹¤íŠ¸ë¡œ ê²°ì •ì„ ë‚´ë ¤ë³´ì„¸ìš”!">
    <meta property="og:url" content="">
    <meta property="og:site_name" content="ê²°ì •ì¥ì•  ë‹¤íŠ¸">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:image" content="og_image.png">
    
    <!-- íŒŒë¹„ì½˜ -->
    <link rel="icon" type="image/png" href="icon-512x512.png">
    <link rel="apple-touch-icon" href="icon-512x512.png">
    
    <!-- PWA ë§¤ë‹ˆí˜ìŠ¤íŠ¸ -->
    <link rel="manifest" href="manifest.json">
    
    <style>
        /* ===================================== */
        /* ğŸ¯ ë‹¤íŠ¸ ê²Œì„ ë©”ì¸ í˜ì´ì§€ - ë¯¸ë‹ˆë©€ë¦¬ì¦˜   */
        /* ===================================== */
        
        /* ê¸°ë³¸ ë¦¬ì…‹ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: white;
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        /* ë©”ì¸ ë˜í¼ - PCì—ì„œ ìµœëŒ€ ë„ˆë¹„ 480px ì¤‘ì•™ ì •ë ¬ */
        .wrapper {
            max-width: 480px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì € ì•ˆë‚´ */
        .kakao-notice {
            background: #fee500;
            color: #333;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.9rem;
            text-align: center;
            display: none;
        }
        
        .kakao-notice.show {
            display: block;
        }
        
        /* í—¤ë” */
        .header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2rem;
            font-weight: 700;
            color: #007BFF;
            margin-bottom: 8px;
        }
        
        .header p {
            font-size: 1rem;
            color: #666;
        }
        
        /* ì„¹ì…˜ */
        .section {
            background-color: #f8f9fa;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid #e9ecef;
        }
        
        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* ì…ë ¥ ì‹œìŠ¤í…œ */
        .input-group {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }
        
        input[type="text"] {
            flex: 1;
            min-width: 200px;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            color: #333;
            background-color: white;
            transition: border-color 0.2s ease;
            outline: none;
        }
        
        input[type="text"]:focus {
            border-color: #007BFF;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }
        
        input[type="text"]::placeholder {
            color: #999;
        }
        
        /* ë²„íŠ¼ ì‹œìŠ¤í…œ - íŒŒë€ìƒ‰(#007BFF) í¬ì¸íŠ¸ */
        .btn {
            padding: 12px 20px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            font-family: inherit;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            min-width: 80px;
            text-decoration: none;
            outline: none;
            white-space: nowrap;
        }
        
        .btn:hover {
            background-color: #0056b3;
            transform: translateY(-1px);
        }
        
        .btn:active {
            background-color: #004494;
            transform: translateY(0);
        }
        
        .btn:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-small {
            padding: 8px 12px;
            font-size: 0.85rem;
            min-width: 60px;
        }
        
        .btn-outline {
            background-color: white;
            color: #007BFF;
            border: 2px solid #007BFF;
        }
        
        .btn-outline:hover {
            background-color: #007BFF;
            color: white;
        }
        
        .btn-success {
            background-color: #28a745;
        }
        
        .btn-success:hover {
            background-color: #1e7e34;
        }
        
        .btn-danger {
            background-color: #dc3545;
        }
        
        .btn-danger:hover {
            background-color: #c82333;
        }
        
        /* ê²Œì„ ì‹œì‘ ë²„íŠ¼ - ê°€ì¥ ì¤‘ìš”! */
        #start-game-btn {
            padding: 20px 40px;
            font-size: 1.3rem;
            font-weight: 700;
            min-width: 200px;
            background: linear-gradient(45deg, #007BFF, #0056b3);
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 123, 255, 0.3);
            margin-top: auto;
            margin-bottom: 20px;
        }
        
        #start-game-btn:hover {
            background: linear-gradient(45deg, #0056b3, #004494);
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(0, 123, 255, 0.4);
        }
        
        #start-game-btn:disabled {
            background: #6c757d;
            box-shadow: none;
            transform: none;
        }
        
        /* í•­ëª© íƒœê·¸ */
        .items-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
            min-height: 40px;
            align-content: flex-start;
        }
        
        .item-tag {
            background-color: #e3f2fd;
            color: #007BFF;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            border: 1px solid #bbdefb;
            transition: all 0.2s ease;
        }
        
        .item-tag:hover {
            background-color: #bbdefb;
            transform: scale(1.02);
        }
        
        .remove-btn {
            background: #007BFF;
            border: none;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            font-size: 12px;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }
        
        .remove-btn:hover {
            background: #0056b3;
        }
        
        /* ì¦ê²¨ì°¾ê¸° ëª©ë¡ */
        .favorites-list {
            list-style: none;
            margin-top: 12px;
        }
        
        .favorite-item {
            background-color: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }
        
        .favorite-item:hover {
            background-color: #f8f9fa;
            border-color: #007BFF;
            transform: translateY(-1px);
        }
        
        .favorite-info {
            flex: 1;
        }
        
        .favorite-name {
            font-weight: 600;
            color: #007BFF;
            margin-bottom: 4px;
            font-size: 1rem;
        }
        
        .favorite-details {
            font-size: 0.8rem;
            color: #666;
        }
        
        .favorite-actions {
            display: flex;
            gap: 8px;
        }
        
        .empty-state {
            text-align: center;
            color: #999;
            font-style: italic;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            margin: 12px 0;
            border: 1px dashed #dee2e6;
        }
        
        /* í•­ëª© ì¹´ìš´í„° */
        .item-counter {
            background-color: #007BFF;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: auto;
        }
        
        /* ê³µìœ í•˜ê¸° ì„¹ì…˜ */
        .share-section {
            background-color: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
            border: 1px solid #e9ecef;
        }
        
        .share-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
        }
        
        .share-buttons {
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .share-btn {
            padding: 8px 16px;
            font-size: 0.9rem;
            min-width: auto;
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 600px) {
            .wrapper {
                padding: 16px;
            }
            
            .header {
                padding: 20px 0;
            }
            
            .header h1 {
                font-size: 1.7rem;
            }
            
            .section {
                padding: 20px;
                margin-bottom: 20px;
            }
            
            .input-group {
                flex-direction: column;
            }
            
            input[type="text"] {
                min-width: auto;
            }
            
            .btn {
                width: 100%;
            }
            
            #start-game-btn {
                padding: 18px 32px;
                font-size: 1.2rem;
            }
            
            .favorite-item {
                flex-direction: column;
                gap: 12px;
                text-align: center;
            }
            
            .favorite-actions {
                width: 100%;
                justify-content: center;
            }
            
            .share-buttons {
                flex-direction: column;
            }
        }
        
        /* ì ‘ê·¼ì„± */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        *:focus {
            outline: 2px solid #007BFF;
            outline-offset: 2px;
        }
        
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        /* í† ìŠ¤íŠ¸ ì•Œë¦¼ */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #007BFF;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 500;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 123, 255, 0.3);
            max-width: 300px;
            word-wrap: break-word;
            transform: translateX(350px);
            transition: transform 0.3s ease;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.success {
            background: #28a745;
        }
        
        .toast.error {
            background: #dc3545;
        }
        
        .toast.info {
            background: #17a2b8;
        }
    </style>
</head>
<body>
    <!-- ë©”ì¸ ì•± -->
    <div class="wrapper">
        <!-- ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì € ì•ˆë‚´ -->
        <div class="kakao-notice" id="kakao-notice">
            âš ï¸ ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ì¼ë¶€ ê¸°ëŠ¥ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ì¸¡ ìƒë‹¨ ë©”ë‰´ì—ì„œ 'ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ë¡œ ì—´ê¸°'ë¥¼ ì´ìš©í•´ì£¼ì„¸ìš”.
        </div>
        
        <!-- í—¤ë” -->
        <header class="header">
            <h1>ğŸ¯ ê²°ì •ì¥ì•  ë‹¤íŠ¸</h1>
            <p>ë‹¤íŠ¸ë¡œ ê²°ì •ì„ ë‚´ë ¤ë³´ì„¸ìš”!</p>
        </header>
        
        <!-- í•­ëª© ì¶”ê°€ ì„¹ì…˜ -->
        <section class="section">
            <h2 class="section-title">
                <span>ğŸ¯</span>
                ë‹¤íŠ¸ ê³¼ë… í•­ëª©
                <span class="item-counter" id="item-counter">0ê°œ</span>
            </h2>
            <div class="input-group">
                <input 
                    type="text" 
                    id="item-input" 
                    placeholder="ì„ íƒí•  í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì¹˜í‚¨, í”¼ì, í–„ë²„ê±°)"
                    maxlength="20"
                    aria-label="ë‹¤íŠ¸ ê³¼ë…ì— ì¶”ê°€í•  í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”"
                >
                <button type="button" class="btn" id="add-btn">
                    <span>â•</span>
                    ì¶”ê°€
                </button>
            </div>
            <div class="items-container" id="items-container">
                <div class="empty-state">ì•„ì§ ì¶”ê°€ëœ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤. ìœ„ì—ì„œ í•­ëª©ì„ ì¶”ê°€í•´ë³´ì„¸ìš”!</div>
            </div>
        </section>
        
        <!-- ì¦ê²¨ì°¾ê¸° ì„¹ì…˜ -->
        <section class="section">
            <h2 class="section-title">
                <span>â­</span>
                ì¦ê²¨ì°¾ê¸°
            </h2>
            <div class="input-group">
                <input 
                    type="text" 
                    id="favorite-name-input" 
                    placeholder="ë‹¤íŠ¸ ê²Œì„ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
                    maxlength="30"
                    aria-label="ì¦ê²¨ì°¾ê¸°ì— ì €ì¥í•  ë‹¤íŠ¸ ê²Œì„ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
                >
                <button type="button" class="btn" id="save-favorite-btn" disabled>
                    <span>ğŸ’¾</span>
                    ì €ì¥
                </button>
            </div>
            <ul class="favorites-list" id="favorites-list">
                <div class="empty-state">ì €ì¥ëœ ì¦ê²¨ì°¾ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
            </ul>
        </section>
        
        <!-- ê³µìœ í•˜ê¸° ì„¹ì…˜ -->
        <section class="share-section">
            <div class="share-title">ğŸ¯ ì¹œêµ¬ë“¤ê³¼ ê³µìœ í•˜ê¸°</div>
            <div class="share-buttons">
                <button type="button" class="btn btn-success share-btn" id="share-btn">
                    <span>ğŸ“¤</span>
                    ê³µìœ í•˜ê¸°
                </button>
                <button type="button" class="btn btn-outline share-btn" id="copy-btn">
                    <span>ğŸ“‹</span>
                    ë§í¬ ë³µì‚¬
                </button>
            </div>
        </section>
        
        <!-- ê²Œì„ ì‹œì‘ ë²„íŠ¼ -->
        <button type="button" id="start-game-btn" disabled>
            <span>ğŸ¯</span>
            ê²Œì„ ì‹œì‘!
        </button>
    </div>

    <script>
        // ===================================== //
        // ğŸ¯ ë‹¤íŠ¸ ê²Œì„ ë©”ì¸ í˜ì´ì§€              //
        // ===================================== //
        
        // ìƒíƒœ ê´€ë¦¬
        let items = [];
        let favorites = [];
        
        // DOM ìš”ì†Œ ì°¸ì¡°
        const itemInput = document.getElementById('item-input');
        const addBtn = document.getElementById('add-btn');
        const itemsContainer = document.getElementById('items-container');
        const itemCounter = document.getElementById('item-counter');
        const favoriteNameInput = document.getElementById('favorite-name-input');
        const saveFavoriteBtn = document.getElementById('save-favorite-btn');
        const favoritesList = document.getElementById('favorites-list');
        const startGameBtn = document.getElementById('start-game-btn');
        const shareBtn = document.getElementById('share-btn');
        const copyBtn = document.getElementById('copy-btn');
        const kakaoNotice = document.getElementById('kakao-notice');
        
        // ===================================== //
        // ğŸ“± ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì € ê°ì§€              //
        // ===================================== //
        
        const detectKakaoBrowser = () => {
            const userAgent = navigator.userAgent;
            return userAgent.includes('KAKAOTALK');
        };
        
        // ===================================== //
        // ğŸ“ í•­ëª© ê´€ë¦¬                          //
        // ===================================== //
        
        // í•­ëª© ì¶”ê°€
        const addItem = () => {
            const value = itemInput.value.trim();
            
            if (!value) {
                showToast('í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!', 'error');
                itemInput.focus();
                return;
            }
            
            if (value.length > 20) {
                showToast('í•­ëª©ì€ 20ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”!', 'error');
                itemInput.focus();
                return;
            }
            
            if (items.includes(value)) {
                showToast('ì´ë¯¸ ì¶”ê°€ëœ í•­ëª©ì…ë‹ˆë‹¤!', 'error');
                itemInput.focus();
                return;
            }
            
            if (items.length >= 12) {
                showToast('ìµœëŒ€ 12ê°œê¹Œì§€ë§Œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!', 'error');
                return;
            }
            
            items.push(value);
            itemInput.value = '';
            itemInput.focus();
            
            updateItemsDisplay();
            updateStartGameButton();
            updateSaveFavoriteButton();
            
            showToast(`"${value}" í•­ëª©ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!`, 'success');
        };
        
        // í•­ëª© ì œê±°
        const removeItem = (index) => {
            if (index < 0 || index >= items.length) return;
            
            const removedItem = items[index];
            items.splice(index, 1);
            
            updateItemsDisplay();
            updateStartGameButton();
            updateSaveFavoriteButton();
            
            showToast(`"${removedItem}" í•­ëª©ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!`, 'info');
        };
        
        // í•­ëª© ëª©ë¡ UI ì—…ë°ì´íŠ¸
        const updateItemsDisplay = () => {
            itemsContainer.innerHTML = '';
            itemCounter.textContent = `${items.length}ê°œ`;
            
            if (items.length === 0) {
                itemsContainer.innerHTML = '<div class="empty-state">ì•„ì§ ì¶”ê°€ëœ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤. ìœ„ì—ì„œ í•­ëª©ì„ ì¶”ê°€í•´ë³´ì„¸ìš”!</div>';
                return;
            }
            
            items.forEach((item, index) => {
                const tag = document.createElement('div');
                tag.className = 'item-tag';
                
                const itemText = document.createElement('span');
                itemText.textContent = item;
                
                const removeButton = document.createElement('button');
                removeButton.className = 'remove-btn';
                removeButton.textContent = 'Ã—';
                removeButton.setAttribute('aria-label', `${item} ì‚­ì œ`);
                removeButton.onclick = () => removeItem(index);
                
                tag.appendChild(itemText);
                tag.appendChild(removeButton);
                itemsContainer.appendChild(tag);
            });
        };
        
        // ê²Œì„ ì‹œì‘ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        const updateStartGameButton = () => {
            const canStart = items.length >= 2;
            startGameBtn.disabled = !canStart;
            
            if (canStart) {
                startGameBtn.innerHTML = '<span>ğŸ¯</span> ê²Œì„ ì‹œì‘!';
            } else {
                startGameBtn.innerHTML = '<span>âŒ</span> ìµœì†Œ 2ê°œ í•­ëª© í•„ìš”';
            }
        };
        
        // ===================================== //
        // â­ ì¦ê²¨ì°¾ê¸° ì‹œìŠ¤í…œ                    //
        // ===================================== //
        
        // ì¦ê²¨ì°¾ê¸° ì €ì¥
        const saveFavorite = () => {
            const name = favoriteNameInput.value.trim();
            
            if (!name) {
                showToast('ë‹¤íŠ¸ ê²Œì„ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!', 'error');
                favoriteNameInput.focus();
                return;
            }
            
            if (name.length > 30) {
                showToast('ì´ë¦„ì€ 30ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”!', 'error');
                favoriteNameInput.focus();
                return;
            }
            
            if (items.length < 2) {
                showToast('ìµœì†Œ 2ê°œ í•­ëª©ì´ í•„ìš”í•©ë‹ˆë‹¤!', 'error');
                return;
            }
            
            const existingIndex = favorites.findIndex(fav => fav.name === name);
            
            if (existingIndex !== -1) {
                if (!confirm(`"${name}" ì´ë¦„ì˜ ì¦ê²¨ì°¾ê¸°ê°€ ì´ë¯¸ ìˆìŠµë‹ˆë‹¤. ë®ì–´ì“°ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                    return;
                }
                favorites[existingIndex] = {
                    name: name,
                    items: [...items],
                    createdAt: Date.now()
                };
            } else {
                favorites.push({
                    name: name,
                    items: [...items],
                    createdAt: Date.now()
                });
            }
            
            saveFavoritesToStorage();
            favoriteNameInput.value = '';
            updateFavoritesDisplay();
            updateSaveFavoriteButton();
            
            showToast(`"${name}" ì¦ê²¨ì°¾ê¸°ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!`, 'success');
        };
        
        // ì¦ê²¨ì°¾ê¸° ë¶ˆëŸ¬ì˜¤ê¸°
        const loadFavorite = (index) => {
            if (index < 0 || index >= favorites.length) return;
            
            const favorite = favorites[index];
            
            if (items.length > 0) {
                if (!confirm(`í˜„ì¬ í•­ëª©ë“¤ì´ "${favorite.name}" ì¦ê²¨ì°¾ê¸°ë¡œ ë°”ë€ë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                    return;
                }
            }
            
            items = [...favorite.items];
            
            updateItemsDisplay();
            updateStartGameButton();
            updateSaveFavoriteButton();
            
            showToast(`"${favorite.name}" ì¦ê²¨ì°¾ê¸°ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤!`, 'info');
        };
        
        // ì¦ê²¨ì°¾ê¸° ì‚­ì œ
        const deleteFavorite = (index) => {
            if (index < 0 || index >= favorites.length) return;
            
            const favorite = favorites[index];
            
            if (!confirm(`"${favorite.name}" ì¦ê²¨ì°¾ê¸°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                return;
            }
            
            favorites.splice(index, 1);
            saveFavoritesToStorage();
            updateFavoritesDisplay();
            
            showToast(`"${favorite.name}" ì¦ê²¨ì°¾ê¸°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!`, 'info');
        };
        
        // ì¦ê²¨ì°¾ê¸° ëª©ë¡ UI ì—…ë°ì´íŠ¸
        const updateFavoritesDisplay = () => {
            favoritesList.innerHTML = '';
            
            if (favorites.length === 0) {
                favoritesList.innerHTML = '<div class="empty-state">ì €ì¥ëœ ì¦ê²¨ì°¾ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            favorites.forEach((favorite, index) => {
                const listItem = document.createElement('li');
                listItem.className = 'favorite-item';
                
                const info = document.createElement('div');
                info.className = 'favorite-info';
                
                const name = document.createElement('div');
                name.className = 'favorite-name';
                name.textContent = favorite.name;
                
                const details = document.createElement('div');
                details.className = 'favorite-details';
                const date = new Date(favorite.createdAt).toLocaleDateString();
                details.textContent = `${favorite.items.length}ê°œ í•­ëª© â€¢ ${date}`;
                
                info.appendChild(name);
                info.appendChild(details);
                
                const actions = document.createElement('div');
                actions.className = 'favorite-actions';
                
                const loadBtn = document.createElement('button');
                loadBtn.className = 'btn btn-small';
                loadBtn.innerHTML = '<span>ğŸ“‚</span> ë¶ˆëŸ¬ì˜¤ê¸°';
                loadBtn.onclick = () => loadFavorite(index);
                
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'btn btn-small btn-outline';
                deleteBtn.innerHTML = '<span>ğŸ—‘ï¸</span> ì‚­ì œ';
                deleteBtn.onclick = () => deleteFavorite(index);
                
                actions.appendChild(loadBtn);
                actions.appendChild(deleteBtn);
                
                listItem.appendChild(info);
                listItem.appendChild(actions);
                favoritesList.appendChild(listItem);
            });
        };
        
        // ì €ì¥ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        const updateSaveFavoriteButton = () => {
            const hasItems = items.length >= 2;
            const hasName = favoriteNameInput.value.trim().length > 0;
            
            saveFavoriteBtn.disabled = !hasItems || !hasName;
        };
        
        // localStorage ê´€ë¦¬
        const saveFavoritesToStorage = () => {
            try {
                localStorage.setItem('dart-favorites', JSON.stringify(favorites));
            } catch (error) {
                console.error('ì¦ê²¨ì°¾ê¸° ì €ì¥ ì‹¤íŒ¨:', error);
                showToast('ì €ì¥ ê³µê°„ì´ ë¶€ì¡±í•©ë‹ˆë‹¤!', 'error');
            }
        };
        
        const loadFavoritesFromStorage = () => {
            try {
                const saved = localStorage.getItem('dart-favorites');
                if (saved) {
                    favorites = JSON.parse(saved);
                    updateFavoritesDisplay();
                }
            } catch (error) {
                console.error('ì¦ê²¨ì°¾ê¸° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', error);
                favorites = [];
            }
        };
        
        // ===================================== //
        // ğŸ¯ ê²Œì„ ì‹œì‘ ë²„íŠ¼ - URL íŒŒë¼ë¯¸í„° ì „ë‹¬ //
        // ===================================== //
        
        // ê²Œì„ ì‹œì‘ ë²„íŠ¼ í´ë¦­ ì²˜ë¦¬ (URL íŒŒë¼ë¯¸í„° ë°©ì‹)
        const handleStartGame = () => {
            if (items.length < 2) {
                showToast('ìµœì†Œ 2ê°œ í•­ëª©ì´ í•„ìš”í•©ë‹ˆë‹¤!', 'error');
                return;
            }
            
            try {
                // items ë°°ì—´ì„ URL íŒŒë¼ë¯¸í„°ë¡œ ë³€í™˜ (í•œê¸€ ê¹¨ì§ ë°©ì§€)
                const encodedItems = items.map(item => encodeURIComponent(item)).join(',');
                const targetUrl = `game.html?items=${encodedItems}`;
                
                console.log('ğŸ¯ ì „ë‹¬í•  í•­ëª©ë“¤:', items);
                console.log('ğŸ“¦ URL íŒŒë¼ë¯¸í„°:', encodedItems);
                console.log('ğŸš€ ì´ë™í•  ì£¼ì†Œ:', targetUrl);
                
                // game.html í˜ì´ì§€ë¡œ ì´ë™
                window.location.href = targetUrl;
                
            } catch (error) {
                console.error('URL ìƒì„± ì‹¤íŒ¨:', error);
                showToast('ê²Œì„ ì‹œì‘ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.', 'error');
            }
        };
        
        // ===================================== //
        // ğŸ“¤ ê³µìœ í•˜ê¸° ê¸°ëŠ¥                      //
        // ===================================== //
        
        // ê³µìœ í•˜ê¸° ë²„íŠ¼
        const handleShare = async () => {
            const shareData = {
                title: 'ê²°ì •ì¥ì•  ë‹¤íŠ¸ ğŸ¯',
                text: 'ë‹¤íŠ¸ë¡œ ê²°ì •ì„ ë‚´ë ¤ë³´ì„¸ìš”!',
                url: window.location.href
            };
            
            if (navigator.share) {
                try {
                    await navigator.share(shareData);
                    showToast('ê³µìœ ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                } catch (error) {
                    if (error.name !== 'AbortError') {
                        console.error('ê³µìœ  ì‹¤íŒ¨:', error);
                        fallbackShare();
                    }
                }
            } else {
                fallbackShare();
            }
        };
        
        // ë§í¬ ë³µì‚¬
        const handleCopyLink = async () => {
            try {
                await navigator.clipboard.writeText(window.location.href);
                showToast('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            } catch (error) {
                console.error('ë§í¬ ë³µì‚¬ ì‹¤íŒ¨:', error);
                showToast('ë§í¬ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        };
        
        // ê³µìœ  ëŒ€ì²´ ë°©ë²•
        const fallbackShare = () => {
            const text = `ë‹¤íŠ¸ë¡œ ê²°ì •ì„ ë‚´ë ¤ë³´ì„¸ìš”! ${window.location.href}`;
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    showToast('ê³µìœ  í…ìŠ¤íŠ¸ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                });
            } else {
                showToast('ê³µìœ  ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', 'error');
            }
        };
        
        // ===================================== //
        // ğŸ”” ì•Œë¦¼ ì‹œìŠ¤í…œ                        //
        // ===================================== //
        
        // í† ìŠ¤íŠ¸ ì•Œë¦¼
        const showToast = (message, type = 'info') => {
            const existing = document.querySelector('.toast');
            if (existing) {
                existing.remove();
            }
            
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (toast.parentElement) {
                        toast.remove();
                    }
                }, 300);
            }, 3000);
        };
        
        // ===================================== //
        // ğŸ® ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë° ì´ˆê¸°í™”            //
        // ===================================== //
        
        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸
        const handleKeyPress = (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                if (event.target === itemInput) {
                    addItem();
                } else if (event.target === favoriteNameInput) {
                    if (!saveFavoriteBtn.disabled) {
                        saveFavorite();
                    }
                }
            }
        };
        
        // ì „ì—­ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        const handleGlobalKeyDown = (event) => {
            if ((event.ctrlKey || event.metaKey) && event.key === 'Enter') {
                event.preventDefault();
                if (!startGameBtn.disabled) {
                    handleStartGame();
                }
            }
        };
        
        // ì´ˆê¸°í™” í•¨ìˆ˜
        const init = () => {
            // ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì € ê°ì§€
            if (detectKakaoBrowser()) {
                kakaoNotice.classList.add('show');
            }
            
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
            addBtn.addEventListener('click', addItem);
            startGameBtn.addEventListener('click', handleStartGame);
            saveFavoriteBtn.addEventListener('click', saveFavorite);
            shareBtn.addEventListener('click', handleShare);
            copyBtn.addEventListener('click', handleCopyLink);
            itemInput.addEventListener('keypress', handleKeyPress);
            favoriteNameInput.addEventListener('keypress', handleKeyPress);
            favoriteNameInput.addEventListener('input', updateSaveFavoriteButton);
            document.addEventListener('keydown', handleGlobalKeyDown);
            
            // ì €ì¥ëœ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
            loadFavoritesFromStorage();
            
            // ì´ˆê¸° UI ì„¤ì •
            updateItemsDisplay();
            updateFavoritesDisplay();
            updateStartGameButton();
            updateSaveFavoriteButton();
            
            // ì´ˆê¸° í¬ì»¤ìŠ¤
            if (window.innerWidth > 600) {
                itemInput.focus();
            }
            
            console.log('ğŸ¯ ë‹¤íŠ¸ ê²Œì„ ë©”ì¸ í˜ì´ì§€ ì´ˆê¸°í™” ì™„ë£Œ!');
            console.log('ğŸ“¦ URL íŒŒë¼ë¯¸í„° ì „ë‹¬ ë°©ì‹: game.html');
        };
        
        // DOM ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸°í™”
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
        
        console.log('ğŸ¨ ë‹¤íŠ¸ ê²Œì„ ë©”ì¸ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
    </script>
    
    <!-- PWA Service Worker ë“±ë¡ -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then((registration) => {
                        console.log('âœ… Service Worker ë“±ë¡ ì„±ê³µ:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('âŒ Service Worker ë“±ë¡ ì‹¤íŒ¨:', error);
                    });
            });
        }

        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            console.log('ğŸ“± PWA ì„¤ì¹˜ ê°€ëŠ¥');
        });

        window.addEventListener('appinstalled', () => {
            console.log('ğŸ‰ PWA ì„¤ì¹˜ ì™„ë£Œ!');
            deferredPrompt = null;
        });
    </script>
</body>
</html>