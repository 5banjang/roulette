<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ê²°ì •ì¥ì•  ëŒë¦¼íŒ</title>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" rel="stylesheet">
    <style>
        :root { --main-color: #007BFF; --light-gray: #f8f9fa; --border-color: #dee2e6; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { font-family: 'Pretendard', sans-serif; background-color: white; color: #333; }
        body { display: flex; justify-content: center; align-items: flex-start; padding-top: 2rem; }
        .wrapper { max-width: 480px; width: 100%; padding: 1rem; }
        .header { text-align: center; margin-bottom: 2rem; }
        .header h1 { font-size: 1.8rem; font-weight: 700; color: var(--main-color); }
        .section { background-color: var(--light-gray); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; }
        .section-title { font-size: 1.2rem; font-weight: 600; margin-bottom: 1rem; }
        .input-group { display: flex; gap: 0.5rem; margin-bottom: 1rem; }
        input[type="text"] { flex: 1; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 8px; font-size: 1rem; }
        .btn { padding: 0.75rem 1rem; background-color: var(--main-color); color: white; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; transition: background-color 0.2s; }
        .btn:hover { background-color: #0056b3; }
        .btn:disabled { background-color: #6c757d; cursor: not-allowed; }
        .items-container { display: flex; flex-wrap: wrap; gap: 0.5rem; min-height: 2rem; }
        .item-tag { background-color: #e3f2fd; color: var(--main-color); padding: 0.5rem 0.75rem; border-radius: 20px; display: inline-flex; align-items: center; gap: 0.5rem; }
        .remove-btn { background: none; border: none; cursor: pointer; color: var(--main-color); font-weight: bold; }
        #spin-button { width: 100%; padding: 1rem; font-size: 1.2rem; font-weight: 700; }
        .favorites-list { list-style: none; }
        .favorite-item { background-color: white; border: 1px solid var(--border-color); border-radius: 8px; padding: 1rem; margin-bottom: 0.5rem; display: flex; justify-content: space-between; align-items: center; }
        .favorite-name { font-weight: 600; }
    </style>
</head>
<body>
    <div class="wrapper">
        <header class="header">
            <h1>ğŸ¯ ê²°ì •ì¥ì•  ëŒë¦¼íŒ</h1>
            <p>ì„ íƒí•  í•­ëª©ë“¤ì„ ì¤€ë¹„í•´ë³´ì„¸ìš”</p>
        </header>
        <section class="section">
            <h2 class="section-title">í•­ëª© ì¶”ê°€</h2>
            <div class="input-group">
                <input type="text" id="item-input" placeholder="í•­ëª© ì…ë ¥ (ì˜ˆ: ì¹˜í‚¨)">
                <button class="btn" id="add-btn">ì¶”ê°€</button>
            </div>
            <div class="items-container" id="items-container"></div>
        </section>
        <section class="section">
            <h2 class="section-title">â­ ì¦ê²¨ì°¾ê¸°</h2>
            <div class="input-group">
                <input type="text" id="favorite-name-input" placeholder="ëŒë¦¼íŒ ì´ë¦„">
                <button class="btn" id="save-favorite-btn" disabled>ì €ì¥</button>
            </div>
            <div class="favorites-list" id="favorites-list"></div>
        </section>
        <button class="btn" id="spin-button" disabled>ëŒë¦¬ê¸°!</button>
    </div>
    <script>
        const itemInput = document.getElementById('item-input');
        const addBtn = document.getElementById('add-btn');
        const itemsContainer = document.getElementById('items-container');
        const favoriteNameInput = document.getElementById('favorite-name-input');
        const saveFavoriteBtn = document.getElementById('save-favorite-btn');
        const favoritesList = document.getElementById('favorites-list');
        const spinButton = document.getElementById('spin-button');

        let items = [];
        let favorites = JSON.parse(localStorage.getItem('rouletteFavorites')) || [];

        function updateItemsDisplay() {
            itemsContainer.innerHTML = '';
            items.forEach((item, index) => {
                const tag = document.createElement('div');
                tag.className = 'item-tag';
                tag.innerHTML = `<span>${item}</span><button class="remove-btn" data-index="${index}">Ã—</button>`;
                itemsContainer.appendChild(tag);
            });
            spinButton.disabled = items.length < 2;
            updateSaveFavoriteButton();
        }

        function updateFavoritesDisplay() {
            favoritesList.innerHTML = '';
            favorites.forEach((fav, index) => {
                const li = document.createElement('div');
                li.className = 'favorite-item';
                li.innerHTML = `<span class="favorite-name">${fav.name} (${fav.items.length}ê°œ)</span>
                                <div>
                                    <button class="btn" data-action="load" data-index="${index}">ë¶ˆëŸ¬ì˜¤ê¸°</button>
                                    <button class="btn" data-action="delete" data-index="${index}">ì‚­ì œ</button>
                                </div>`;
                favoritesList.appendChild(li);
            });
        }
        
        function updateSaveFavoriteButton() {
            saveFavoriteBtn.disabled = items.length < 2 || !favoriteNameInput.value.trim();
        }

        addBtn.onclick = () => {
            const value = itemInput.value.trim();
            if (value && !items.includes(value)) {
                items.push(value);
                itemInput.value = '';
                updateItemsDisplay();
            }
        };
        
        itemInput.onkeyup = (e) => {
            if (e.key === 'Enter') addBtn.onclick();
        };

        itemsContainer.onclick = (e) => {
            if (e.target.classList.contains('remove-btn')) {
                items.splice(e.target.dataset.index, 1);
                updateItemsDisplay();
            }
        };
        
        favoriteNameInput.oninput = updateSaveFavoriteButton;

        saveFavoriteBtn.onclick = () => {
            const name = favoriteNameInput.value.trim();
            favorites.push({ name, items: [...items] });
            localStorage.setItem('rouletteFavorites', JSON.stringify(favorites));
            updateFavoritesDisplay();
            favoriteNameInput.value = '';
        };

        favoritesList.onclick = (e) => {
            const { action, index } = e.target.dataset;
            if (action === 'load') {
                items = [...favorites[index].items];
                updateItemsDisplay();
            } else if (action === 'delete') {
                favorites.splice(index, 1);
                localStorage.setItem('rouletteFavorites', JSON.stringify(favorites));
                updateFavoritesDisplay();
            }
        };

        spinButton.onclick = () => {
            const encodedItems = items.map(item => encodeURIComponent(item)).join(',');
            window.location.href = `result.html?items=${encodedItems}`;
        };

        updateItemsDisplay();
        updateFavoritesDisplay();
    </script>
</body>
</html>